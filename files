module.exports=function(e){var t={};["ariaAccessibility","core","disable","dynamicPositioning","enable","keyboardNavigation","keyboardSearch","selectOption","setOption","setOptions","wait"].forEach(function(e){t[e]={src:"src/javascripts/jquery.selectBoxIt."+e+".js",dest:"src/javascripts/jquery.selectBoxIt."+e+".min.js"}}),e.initConfig({pkg:"<json:package.json>",meta:{banner:'/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>\n<%= pkg.homepage ? "* " + pkg.homepage + "\n" : "" %>* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>; Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %> */'},concat:{minified:{src:["src/javascripts/jquery.selectBoxIt.core.min.js","src/javascripts/jquery.selectBoxIt.ariaAccessibility.min.js","src/javascripts/jquery.selectBoxIt.disable.min.js","src/javascripts/jquery.selectBoxIt.dynamicPositioning.min.js","src/javascripts/jquery.selectBoxIt.enable.min.js","src/javascripts/jquery.selectBoxIt.keyboardNavigation.min.js","src/javascripts/jquery.selectBoxIt.keyboardSearch.min.js","src/javascripts/jquery.selectBoxIt.selectOption.min.js","src/javascripts/jquery.selectBoxIt.setOption.min.js","src/javascripts/jquery.selectBoxIt.setOptions.min.js","src/javascripts/jquery.selectBoxIt.wait.min.js","src/javascripts/jquery.selectBoxIt.endClosure.min.js"],dest:"src/javascripts/jquery.selectBoxIt.min.js"},unminified:{src:["src/javascripts/jquery.selectBoxIt.core.js","src/javascripts/jquery.selectBoxIt.ariaAccessibility.js","src/javascripts/jquery.selectBoxIt.disable.js","src/javascripts/jquery.selectBoxIt.dynamicPositioning.js","src/javascripts/jquery.selectBoxIt.enable.js","src/javascripts/jquery.selectBoxIt.keyboardNavigation.js","src/javascripts/jquery.selectBoxIt.keyboardSearch.js","src/javascripts/jquery.selectBoxIt.selectOption.js","src/javascripts/jquery.selectBoxIt.setOption.js","src/javascripts/jquery.selectBoxIt.setOptions.js","src/javascripts/jquery.selectBoxIt.wait.js","src/javascripts/jquery.selectBoxIt.endClosure.js"],dest:"src/javascripts/jquery.selectBoxIt.js"}},min:{files:["grunt.js","src/javascripts/jquery.selectBoxIt.js"]},jasmine:{all:{src:["test/SpecRunner.html"],timeout:15e4}},lint:{files:["grunt.js","src/javascripts/jquery.selectBoxIt.js"]},watch:{files:"<config:lint.files>",tasks:"lint jasmine"},jshint:{options:{curly:!0,eqeqeq:!0,immed:!0,latedef:!0,newcap:!0,noarg:!0,sub:!0,undef:!0,boss:!0,eqnull:!0,browser:!0,jquery:!0},globals:{jQuery:!0}},uglify:{}}),e.loadNpmTasks("grunt-jasmine-task"),e.registerTask("default","concat min lint jasmine"),e.registerTask("travis","lint jasmine")},function(e){"use strict";e(window.jQuery,window,document)}(function(e,t,n,r){"use strict";e.widget("selectBox.selectBoxIt",{VERSION:"2.9.9",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:!0,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"bootstrap",keydownOpen:!0,isMobile:function(){var e=navigator.userAgent||navigator.vendor||t.opera;return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(e)},nostyle:!1,"native":!1,aggressiveChange:!1,selectWhenHidden:!0},currentFocus:0,blur:!0,textArray:[],currentIndex:0,flipped:!1,getThemes:function(){var t=this,n=e(t.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui"},jquerymobile:{focus:"ui-btn-down-"+n,hover:"ui-btn-hover-"+n,disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+n,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+n,container:"jquerymobile"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",disabled:"selectboxit-disabled",arrow:"selectboxit-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container"}}},_create:function(){var t=this;if(!t.element.is("select"))return;return t.originalElem=t.element[0],t.selectBox=t.element,t.selectItems=t.element.find("option"),t.firstSelectItem=t.element.find("option").slice(0,1),t.documentHeight=e(n).height(),t.theme=t.getThemes()[t.options.theme]||t.getThemes()["default"],t._createdropdown()._createUnorderedList()._addSelectBoxAttributes()._replaceSelectBox()._addClasses(t.theme)._eventHandlers(),t.originalElem.disabled&&t.disable&&t.disable(),t._ariaAccessibility&&t._ariaAccessibility(),t._mobile(),t.options["native"]&&this._applyNativeSelect(),t.triggerEvent("create"),t},_createdropdown:function(){var t=this;return t.dropdownText=e("<span/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:t.firstSelectItem.text()}).attr("data-val",t.originalElem.value),t.dropdownImage=e("<i/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"}),t.dropdown=e("<span/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxIt","class":"selectboxit "+(t.selectBox.attr("class")||""),name:t.originalElem.name,tabindex:t.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(t.dropdownImage).append(t.dropdownText),t.dropdownContainer=e("<span/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxItContainer","class":"selectboxit-container"}).append(t.dropdown),t},_createUnorderedList:function(){var t=this,n,r,i,s,o,u,a,f="",l=e("<ul/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1});t.options.showFirstOption||(t.selectItems=t.selectBox.find("option").slice(1)),t.selectItems.each(function(l){r="",i="",n=e(this).prop("disabled"),s=e(this).data("icon")||"",o=e(this).data("iconurl")||"",u=o?"selectboxit-option-icon-url":"",a=o?"style=\"background-image:url('"+o+"');\"":"",e(this).parent().is("optgroup")&&(r="selectboxit-optgroup-option",e(this).index()===0&&(i='<span class="selectboxit-optgroup-header" data-disabled="true">'+e(this).parent().first().attr("label")+"</span>")),f+=i+'<li id="'+l+'" data-val="'+t.htmlEscape(this.value)+'" data-disabled="'+n+'" class="'+r+" selectboxit-option "+(e(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><i class="selectboxit-option-icon '+s+" "+u+'"'+a+"></i>"+t.htmlEscape(e(this).text())+"</a></li>",t.textArray[l]=n?"":e(this).text(),this.selected&&(t.dropdownText.text(e(this).text()),t.currentFocus=l)});if((t.options.defaultText||t.selectBox.data("text"))&&!t.selectBox.find("option[selected]").length){var c=t.options.defaultText||t.selectBox.data("text");t.dropdownText.text(c),t.options.defaultText=c}return l.append(f),t.list=l,t.dropdownContainer.append(t.list),t.listItems=t.list.find("li"),t.listItems.first().addClass("selectboxit-option-first"),t.listItems.last().addClass("selectboxit-option-last"),t.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(t.theme.disabled),t.currentFocus===0&&!t.options.showFirstOption&&t.listItems.eq(0).hasClass(t.theme.disabled)&&(t.currentFocus=+t.listItems.not(".ui-state-disabled").first().attr("id")),t.dropdownImage.addClass(t.selectBox.data("icon")||t.options.defaultIcon||t.listItems.eq(t.currentFocus).find("i").attr("class")),t.dropdownImage.attr("style",t.listItems.eq(t.currentFocus).find("i").attr("style")),t},_replaceSelectBox:function(){var t=this;t.selectBox.css("display","none").after(t.dropdownContainer);var n=t.dropdown.height();return t.downArrow=e("<i/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"}),t.downArrowContainer=e("<span/>",{id:(t.originalElem.id||"")&&t.originalElem.id+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(t.downArrow),t.dropdown.append(this.options.nostyle?t.downArrow:t.downArrowContainer),t.options.nostyle||(t.downArrowContainer.css({height:n+"px"}),t.dropdownText.css({"line-height":t.dropdown.css("height"),"max-width":t.dropdown.outerWidth()-(t.downArrowContainer.outerWidth()+t.dropdownImage.outerWidth())}),t.dropdownImage.css({"margin-top":n/4}),t.listItems.removeClass("selectboxit-selected").eq(t.currentFocus).addClass("selectboxit-selected")),t},_scrollToView:function(e){var t=this,n=t.list.scrollTop(),r=t.listItems.eq(t.currentFocus).height(),i=t.listItems.eq(t.currentFocus).position().top,s=t.list.height();return e==="search"?s-i<r?t.list.scrollTop(n+(i-(s-r))):i<-1&&t.list.scrollTop(i-r):e==="up"?i<-1&&t.list.scrollTop(n-Math.abs(t.listItems.eq(t.currentFocus).position().top)):e==="down"&&s-i<r&&t.list.scrollTop(n+(Math.abs(t.listItems.eq(t.currentFocus).position().top)-s+r)),t},_callbackSupport:function(t){var n=this;return e.isFunction(t)&&t.call(n,n.dropdown),n},open:function(e){var t=this;if(!t.listItems.length)return t;t._dynamicPositioning&&t._dynamicPositioning();if(!this.list.is(":visible")){t.triggerEvent("open");switch(t.options.showEffect){case"none":t.list.show(),t._scrollToView("search");break;case"show":t.list.show(t.options.showEffectSpeed,function(){t._scrollToView("search")});break;case"slideDown":t.list.slideDown(t.options.showEffectSpeed,function(){t._scrollToView("search")});break;case"fadeIn":t.list.fadeIn(t.options.showEffectSpeed),t._scrollToView("search");break;default:t.list.show(t.options.showEffect,t.options.showEffectOptions,t.options.showEffectSpeed,function(){t._scrollToView("search")})}}return t._callbackSupport(e),t},close:function(e){var t=this;if(t.list.is(":visible")){t.triggerEvent("close");switch(t.options.hideEffect){case"none":t.list.hide(),t._scrollToView("search");break;case"hide":t.list.hide(t.options.hideEffectSpeed);break;case"slideUp":t.list.slideUp(t.options.hideEffectSpeed);break;case"fadeOut":t.list.fadeOut(t.options.hideEffectSpeed);break;default:t.list.hide(t.options.hideEffect,t.options.hideEffectOptions,t.options.hideEffectSpeed,function(){t._scrollToView("search")})}}return t._callbackSupport(e),t},_eventHandlers:function(){var t=this,n=38,r=40,i=13,s=8,o=9,u=32,a=27;return this.dropdown.bind({"click.selectBoxIt":function(){t.dropdown.trigger("focus",!0),t.originalElem.disabled||(t.triggerEvent("click"),t.list.is(":visible")?t.close():t.open())},"mousedown.selectBoxIt":function(){e(this).data("mdown",!0),t.triggerEvent("mousedown")},"mouseup.selectBoxIt":function(){t.triggerEvent("mouseup")},"blur.selectBoxIt":function(){t.blur&&(t.triggerEvent("blur"),t.list.is(":visible")&&t.close())},"focus.selectBoxIt":function(n,r){var i=e(this).data("mdown");e(this).removeData("mdown"),!i&&!r&&setTimeout(function(){t.triggerEvent("tab-focus")},0),r||t.triggerEvent("focus")},"keydown.selectBoxIt":function(e){var u=e.keyCode;switch(u){case r:e.preventDefault(),t.moveDown&&(t.options.keydownOpen?t.list.is(":visible")?t.moveDown():t.open():t.moveDown()),t.options.keydownOpen&&t.open();break;case n:e.preventDefault(),t.moveUp&&(t.options.keydownOpen?t.list.is(":visible")?t.moveUp():t.open():t.moveUp()),t.options.keydownOpen&&t.open();break;case i:var f=t.list.find("li."+t.focusClass);f.length||(f=t.listItems.first()),t._update(f),e.preventDefault(),t.list.is(":visible")&&t.close(),t.triggerEvent("enter");break;case o:t.triggerEvent("tab-blur");break;case s:e.preventDefault(),t.triggerEvent("backspace");break;case a:t.close();break;default:}},"keypress.selectBoxIt":function(e){var n=e.charCode||e.keyCode,r=String.fromCharCode(n);n===u&&e.preventDefault(),t.search&&t.search(r,!0,"")},"mouseenter.selectBoxIt":function(){t.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){t.triggerEvent("mouseleave")}}),t.list.bind({"mouseover.selectBoxIt":function(){t.blur=!1},"mouseout.selectBoxIt":function(){t.blur=!0},"focusin.selectBoxIt":function(){t.dropdown.trigger("focus",!0)}}).delegate("li","click.selectBoxIt",function(){t._update(e(this)),t.triggerEvent("option-click"),e(this).attr("data-disabled")==="false"&&t.close()}).delegate("li","focusin.selectBoxIt",function(){t.listItems.not(e(this)).removeAttr("data-active"),e(this).attr("data-active",""),(t.options.searchWhenHidden&&t.list.is(":hidden")||t.options.aggressiveChange||t.list.is(":hidden")&&t.options.selectWhenHidden)&&t._update(e(this))}),t.selectBox.bind({"change.selectBoxIt, internal-change.selectBoxIt":function(e,n){if(!n){var r=t.list.find('li[data-val="'+t.originalElem.value+'"]');r.length&&(t.listItems.eq(t.currentFocus).removeClass(t.focusClass),t.currentFocus=+r.attr("id"))}t.dropdownText.text(t.listItems.eq(t.currentFocus).find("a").text()).attr("data-val",t.originalElem.value),t.listItems.eq(t.currentFocus).find("i").attr("class")&&(t.dropdownImage.attr("class",t.listItems.eq(t.currentFocus).find("i").attr("class")).addClass("selectboxit-default-icon"),t.dropdownImage.attr("style",t.listItems.eq(t.currentFocus).find("i").attr("style"))),t.triggerEvent("changed")},"disable.selectBoxIt":function(){t.dropdown.addClass(t.theme.disabled)},"enable.selectBoxIt":function(){t.dropdown.removeClass(t.theme.disabled)}}),t},_update:function(e){var t=this;e.attr("data-disabled")==="false"&&(t.options.defaultText&&t.dropdownText.text()===t.options.defaultText&&t.selectBox.val()===e.attr("data-val")?t.dropdownText.text(t.listItems.eq(t.currentFocus).text()).trigger("internal-change"):(t.selectBox.val(e.attr("data-val")),t.currentFocus=+e.attr("id"),t.originalElem.value!==t.dropdownText.attr("data-val")&&t.triggerEvent("change")))},_addClasses:function(t){var n=this,r=t.focus,i=t.hover,s=t.button,o=t.list,u=t.arrow,a=t.container;return n.focusClass=r,n.selectedClass="selectboxit-selected",n.downArrow.addClass(n.selectBox.data("downarrow")||n.options.downArrowIcon||u),n.dropdownContainer.addClass(a),n.dropdown.addClass(s),n.list.addClass(o),n.listItems.bind({"focusin.selectBoxIt":function(){e(this).addClass(r)},"blur.selectBoxIt":function(){e(this).removeClass(r)}}),n.selectBox.bind({"open.selectBoxIt":function(){var e=n.list.find("li[data-val='"+n.dropdownText.attr("data-val")+"']");e.length||(e=n.listItems.first()),n.currentFocus=+e.attr("id");var t=n.listItems.eq(n.currentFocus);n.dropdown.removeClass(i).addClass(r),n.listItems.removeClass(n.selectedClass),n.listItems.removeAttr("data-active").not(t).removeClass(r),t.addClass(r).addClass(n.selectedClass)},"blur.selectBoxIt":function(){n.dropdown.removeClass(r)},"mouseenter.selectBoxIt":function(){n.dropdown.addClass(i)},"mouseleave.selectBoxIt":function(){n.dropdown.removeClass(i)}}),n.listItems.bind({"mouseenter.selectBoxIt":function(){e(this).attr("data-disabled")==="false"&&(n.listItems.removeAttr("data-active"),e(this).addClass(r).attr("data-active",""),n.listItems.not(e(this)).removeClass(r),e(this).addClass(r),n.currentFocus=+e(this).attr("id"))},"mouseleave.selectBoxIt":function(){e(this).attr("data-disabled")==="false"&&(n.listItems.not(e(this)).removeClass(r).removeAttr("data-active"),e(this).addClass(r),n.currentFocus=+e(this).attr("id"))}}),e(".selectboxit-option-icon").not(".selectboxit-default-icon").css("margin-top",n.downArrowContainer.height()/4),n},destroy:function(t){var n=this;return n._destroySelectBoxIt(),e.Widget.prototype.destroy.call(n),n._callbackSupport(t),n},_destroySelectBoxIt:function(){var e=this;return e.dropdown.unbind(".selectBoxIt").undelegate(".selectBoxIt"),e.dropdownContainer.remove(),e.triggerEvent("destroy"),e.selectBox.removeAttr("style").show(),e},refresh:function(e){var t=this;return t._destroySelectBoxIt()._create(!0)._callbackSupport(e),t.triggerEvent("refresh"),t},_applyNativeSelect:function(){var e=this,t;e.dropdownContainer.css({position:"static"}),e.selectBox.css({display:"block",width:e.dropdown.outerWidth(),height:e.dropdown.outerHeight(),opacity:"0",position:"absolute",top:e.dropdown.position().top,bottom:e.dropdown.position().bottom,left:e.dropdown.position().left,right:e.dropdown.position().right,cursor:"pointer","z-index":"999999"}).bind({"changed.selectBoxIt":function(){t=e.selectBox.find("option").filter(":selected"),e.dropdownText.text(t.text()),e.list.find('li[data-val="'+t.val()+'"]').find("i").attr("class")&&e.dropdownImage.attr("class",e.list.find('li[data-val="'+t.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}})},_mobile:function(e){var t=this;return this.options.isMobile()&&t._applyNativeSelect(),this},htmlEscape:function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(e){var t=this,n=t.options.showFirstOption?t.currentFocus:t.currentFocus-1>=0?t.currentFocus:0;return t.selectBox.trigger(e,{elem:t.selectBox.eq(n),"dropdown-elem":t.listItems.eq(t.currentFocus)}),t},_addSelectBoxAttributes:function(t){var n=this;return n._addAttributes(n.selectBox.prop("attributes"),n.dropdown),n.selectItems.each(function(t){n._addAttributes(e(this).prop("attributes"),n.listItems.eq(t))}),n},_addAttributes:function(t,n){var r=this,i=["null","value","disabled","id","class","unselectable"];return t.length&&e.each(t,function(t,r){var s=r.name.toLowerCase(),o=r.value;o!=="null"&&e.inArray(s,i)===-1&&n.attr(s,o)}),r}}),e.selectBox.selectBoxIt.prototype._ariaAccessibility=function(){var t=this;return t.dropdown.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":t.list.attr("id"),"aria-activedescendant":t.listItems.eq(t.currentFocus).attr("id"),"aria-label":e("label[for='"+t.originalElem.id+"']").text()||"","aria-live":"assertive"}).bind({"disable.selectBoxIt":function(){t.dropdown.attr("aria-disabled","true")},"enable.selectBoxIt":function(){t.dropdown.attr("aria-disabled","false")}}),t.list.attr({role:"listbox","aria-hidden":"true"}),t.listItems.attr({role:"option"}),t.selectBox.bind({"change.selectBoxIt":function(){t.dropdownText.attr("aria-label",t.originalElem.value)},"open.selectBoxIt":function(){t.list.attr("aria-hidden","false"),t.dropdown.attr("aria-expanded","true")},"close.selectBoxIt":function(){t.list.attr("aria-hidden","true"),t.dropdown.attr("aria-expanded","false")}}),t},e.selectBox.selectBoxIt.prototype.disable=function(t){var n=this;return n.options.disabled||(n.close(),n.triggerEvent("disable"),n.selectBox.attr("disabled","disabled"),n.dropdown.removeAttr("tabindex").addClass("selectboxit-disabled"),e.Widget.prototype.disable.call(n)),n._callbackSupport(t),n},e.selectBox.selectBoxIt.prototype.disableOption=function(e,t){var n=this,r,i,s;return(typeof e).toLowerCase()==="number"&&(n.close(),r=n.selectBox.find("option").eq(e),n.triggerEvent("disable-option"),r.attr("disabled","disabled"),n.listItems.eq(e).attr("data-disabled","true").addClass(n.theme.disabled),n.currentFocus===e&&(i=n.listItems.eq(n.currentFocus).nextAll("li").not("[data-disabled='true']").first().length,s=n.listItems.eq(n.currentFocus).prevAll("li").not("[data-disabled='true']").first().length,i?n.moveDown():s?n.moveUp():n.disable())),n._callbackSupport(t),n},e.selectBox.selectBoxIt.prototype._isDisabled=function(e){var t=this;return t.originalElem.disabled&&t.disable(),t},e.selectBox.selectBoxIt.prototype._dynamicPositioning=function(){var n=this,r=n.dropdown.offset().top,i=n.list.data("max-height")||n.list.outerHeight(),s=n.dropdown.outerHeight(),o=e(t).height(),u=e(t).scrollTop(),a=r+s+i<=o+u,f=!a;n.list.data("max-height")||n.list.data("max-height",n.list.outerHeight()),n.selectBox.css("display","none");if(!f)n.list.css("max-height",n.list.data("max-height")),n.list.css("top","auto");else if(n.dropdown.offset().top-u>=i)n.list.css("max-height",n.list.data("max-height")),n.list.css("top",n.dropdown.position().top-n.list.outerHeight());else{var l=Math.abs(r+s+i-(o+u)),c=Math.abs(n.dropdown.offset().top-u-i);l<c?(n.list.css("max-height",n.list.data("max-height")-l-s/2),n.list.css("top","auto")):(n.list.css("max-height",n.list.data("max-height")-c-s/2),n.list.css("top",n.dropdown.position().top-n.list.outerHeight()))}return n},e.selectBox.selectBoxIt.prototype.enable=function(t){var n=this;return n.options.disabled&&(n.triggerEvent("enable"),n.selectBox.removeAttr("disabled"),n.dropdown.attr("tabindex",0).removeClass(n.disabledClasses),e.Widget.prototype.enable.call(n),n._callbackSupport(t)),n},e.selectBox.selectBoxIt.prototype.enableOption=function(e,t){var n=this,r,i=0,s,o;return(typeof e).toLowerCase()==="number"&&(r=n.selectBox.find("option").eq(e),n.triggerEvent("enable-option"),r.removeAttr("disabled"),n.listItems.eq(e).attr("data-disabled","false").removeClass(n.disabledClasses)),n._callbackSupport(t),n},e.selectBox.selectBoxIt.prototype.moveDown=function(e){var t=this;t.currentFocus+=1;var n=t.listItems.eq(t.currentFocus).attr("data-disabled")==="true"?!0:!1,r=t.listItems.eq(t.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(t.currentFocus===t.listItems.length)t.currentFocus-=1;else{if(n&&r){t.listItems.eq(t.currentFocus-1).blur(),t.moveDown();return}n&&!r?t.currentFocus-=1:(t.listItems.eq(t.currentFocus-1).blur().end().eq(t.currentFocus).focusin(),t._scrollToView("down"),t.triggerEvent("moveDown"))}return t._callbackSupport(e),t},e.selectBox.selectBoxIt.prototype.moveUp=function(e){var t=this;t.currentFocus-=1;var n=t.listItems.eq(t.currentFocus).attr("data-disabled")==="true"?!0:!1,r=t.listItems.eq(t.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(t.currentFocus===-1)t.currentFocus+=1;else{if(n&&r){t.listItems.eq(t.currentFocus+1).blur(),t.moveUp();return}n&&!r?t.currentFocus+=1:(t.listItems.eq(this.currentFocus+1).blur().end().eq(t.currentFocus).focusin(),t._scrollToView("up"),t.triggerEvent("moveUp"))}return t._callbackSupport(e),t},e.selectBox.selectBoxIt.prototype._setCurrentSearchOption=function(e){var t=this;return(t.options.aggressiveChange||t.options.selectWhenHidden||t.listItems.eq(e).is(":visible"))&&t.listItems.eq(e).data("disabled")!==!0&&(t.listItems.eq(t.currentFocus).blur(),t.currentIndex=e,t.currentFocus=e,t.listItems.eq(t.currentFocus).focusin(),t._scrollToView("search"),t.triggerEvent("search")),t},e.selectBox.selectBoxIt.prototype._searchAlgorithm=function(e,t){var n=this,r=!1,i,s,o;for(i=e,o=n.textArray.length;i<o;i+=1){for(s=0;s<o;s+=1)n.textArray[s].search(t)!==-1&&(r=!0,s=o);r||(n.currentText=n.currentText.charAt(n.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0"),t=new RegExp(n.currentText,"gi"));if(n.currentText.length<3){t=new RegExp(n.currentText.charAt(0),"gi");if(n.textArray[i].charAt(0).search(t)!==-1)return n._setCurrentSearchOption(i),n.currentIndex+=1,!1}else if(n.textArray[i].search(t)!==-1)return n._setCurrentSearchOption(i),!1;if(n.textArray[i].toLowerCase()===n.currentText.toLowerCase())return n._setCurrentSearchOption(i),n.currentText="",!1}return!0},e.selectBox.selectBoxIt.prototype.search=function(e,t,n){var i=this;i.currentText===r&&(i.currentText=""),t?i.currentText+=e.replace(/[|()\[{.+*?$\\]/g,"\\$0"):i.currentText=e.replace(/[|()\[{.+*?$\\]/g,"\\$0");var s=i._searchAlgorithm(i.currentIndex,i.currentText);return s&&i._searchAlgorithm(0,i.currentText),i._callbackSupport(n),i},e.selectBox.selectBoxIt.prototype.selectOption=function(e,t){var n=this;return(typeof e).toLowerCase()==="number"?n.selectBox.val(n.selectBox.find("option").eq(e).val()).change():(typeof e).toLowerCase()==="string"&&n.selectBox.val(e).change(),n._callbackSupport(t),n},e.selectBox.selectBoxIt.prototype.setOption=function(t,n,r){var i=this;return t==="showFirstOption"&&!n?i.listItems.eq(0).hide():t==="showFirstOption"&&n?i.listItems.eq(0).show():t==="defaultIcon"&&n?i.dropdownImage.attr("class",n+" selectboxit-arrow"):t==="downArrowIcon"&&n?i.downArrow.attr("class",n+" selectboxit-arrow"):t==="defaultText"&&i.dropdownText.text(n),e.Widget.prototype._setOption.apply(i,arguments),i._callbackSupport(r),i},e.selectBox.selectBoxIt.prototype.setOptions=function(t,n){var r=this;return e.Widget.prototype._setOptions.apply(r,arguments),r.options.showFirstOption?r.listItems.eq(0).show():r.listItems.eq(0).hide(),r.options.defaultIcon&&r.dropdownImage.attr("class",r.options.defaultIcon+" selectboxit-arrow"),r.options.downArrowIcon&&r.downArrow.attr("class",r.options.downArrowIcon+" selectboxit-arrow"),r.options.defaultText&&r.dropdownText.text(r.options.defaultText),r._callbackSupport(n),r},e.selectBox.selectBoxIt.prototype.wait=function(e,t){var n=this,r=this.returnTimeout(e);return r.then(function(){n._callbackSupport(t)}),n},e.selectBox.selectBoxIt.prototype.returnTimeout=function(t){return e.Deferred(function(e){setTimeout(e.resolve,t)})}});